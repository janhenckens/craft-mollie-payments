import{_ as s,c as i,a0 as e,o as t}from"./chunks/framework.BbxKZnhw.js";const c=JSON.parse('{"title":"Template functions - Mollie payments","description":"","frontmatter":{"title":"Template functions - Mollie payments","prev":false,"next":false},"headers":[],"relativePath":"payment-template-function.md","filePath":"payment-template-function.md"}'),n={name:"payment-template-function.md"};function p(l,a,h,r,o,k){return t(),i("div",null,a[0]||(a[0]=[e(`<h1 id="template-functions" tabindex="-1">Template functions <a class="header-anchor" href="#template-functions" aria-label="Permalink to &quot;Template functions&quot;">​</a></h1><h2 id="craft-payments" tabindex="-1">craft.payments <a class="header-anchor" href="#craft-payments" aria-label="Permalink to &quot;craft.payments&quot;">​</a></h2><p>To display data from the payment on a confirmation page or on a profile page, you can <code>craft.payments</code> to query for payments in twig.</p><h3 id="confirmation-page" tabindex="-1">Confirmation page <a class="header-anchor" href="#confirmation-page" aria-label="Permalink to &quot;Confirmation page&quot;">​</a></h3><p>On the page to which the user gets redirected after payment, the url has the status and the <code>uid</code> of the payment.</p><div class="language-twig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">twig</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{% </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> uid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> craft.app.request.getParam(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;payment&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)%}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{% </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> payment </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> craft.payments.uid(uid).one() %}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ payment.email }}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ payment.firstName }} </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">{# or any other custom field by handle #}</span></span></code></pre></div><h3 id="profile-page" tabindex="-1">Profile page <a class="header-anchor" href="#profile-page" aria-label="Permalink to &quot;Profile page&quot;">​</a></h3><p>If you want to show an overview of a user&#39;s payments, on a profiel page for example, you can search the payments by email.</p><div class="language-twig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">twig</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{% </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> payment </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> craft.payments.email(currentUser.email).status(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;paid&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).all() %}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {{ payment.amount %}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {{ payment.firstName }} {# </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">or</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> any other custom field by handle #}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {{ payment.getForm().currency }}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {{ payment.getForm().title }}     </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{% endfor %}</span></span></code></pre></div>`,9)]))}const E=s(n,[["render",p]]);export{c as __pageData,E as default};
