import{_ as s,c as n,o as a,a as e}from"./app.474e1d3e.js";const A=JSON.parse('{"title":"Events - Mollie payments","description":"","frontmatter":{"title":"Events - Mollie payments","prev":false,"next":false},"headers":[{"level":3,"title":"EVENT_BEFORE_PAYMENT_SAVE","slug":"event-before-payment-save","link":"#event-before-payment-save","children":[]},{"level":3,"title":"EVENT_AFTER_TRANSACTION_UPDATE","slug":"event-after-transaction-update","link":"#event-after-transaction-update","children":[]}],"relativePath":"events.md"}'),l={name:"events.md"},p=e(`<h1 id="events" tabindex="-1">Events <a class="header-anchor" href="#events" aria-hidden="true">#</a></h1><h3 id="event-before-payment-save" tabindex="-1">EVENT_BEFORE_PAYMENT_SAVE <a class="header-anchor" href="#event-before-payment-save" aria-hidden="true">#</a></h3><p>Before the payment element gets saved, you can listen this event:</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#F78C6C;">use</span><span style="color:#FFCB6B;"> </span><span style="color:#A6ACCD;">studioespresso</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">molliepayments</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">events</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">PaymentUpdateEvent</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">use</span><span style="color:#FFCB6B;"> </span><span style="color:#A6ACCD;">studioespresso</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">molliepayments</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">MolliePayments</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">use</span><span style="color:#FFCB6B;"> </span><span style="color:#A6ACCD;">studioespresso</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">molliepayments</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">services</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">Payment</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">use</span><span style="color:#FFCB6B;"> </span><span style="color:#A6ACCD;">yii</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">base</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">Event</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Event</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">on</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">Payment</span><span style="color:#89DDFF;">::</span><span style="color:#F78C6C;">class</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">MolliePayments</span><span style="color:#89DDFF;">::</span><span style="color:#A6ACCD;">EVENT_BEFORE_PAYMENT_SAVE</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">PaymentUpdateEvent</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// handle the event here</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">});</span></span>
<span class="line"></span></code></pre></div><p>The event contains the following:</p><ul><li>The payment element</li><li><code>isNew</code>: to see if we&#39;re saving a new versus an excisting element (right now payment elements can only be saved once so this will always be set to true. In the future when we add updating payment this will change accordingly)</li></ul><h3 id="event-after-transaction-update" tabindex="-1">EVENT_AFTER_TRANSACTION_UPDATE <a class="header-anchor" href="#event-after-transaction-update" aria-hidden="true">#</a></h3><p>When Mollie send back a post request to the plugin&#39;s webhook to update the status, the following event is fired:</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#F78C6C;">use</span><span style="color:#FFCB6B;"> </span><span style="color:#A6ACCD;">studioespresso</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">molliepayments</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">events</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">TransactionUpdateEvent</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">use</span><span style="color:#FFCB6B;"> </span><span style="color:#A6ACCD;">studioespresso</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">molliepayments</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">MolliePayments</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">use</span><span style="color:#FFCB6B;"> </span><span style="color:#A6ACCD;">studioespresso</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">molliepayments</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">services</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">Transaction</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">use</span><span style="color:#FFCB6B;"> </span><span style="color:#A6ACCD;">yii</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">base</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">Event</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Event</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">on</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">Transaction</span><span style="color:#89DDFF;">::</span><span style="color:#F78C6C;">class</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">MolliePayments</span><span style="color:#89DDFF;">::</span><span style="color:#A6ACCD;">EVENT_AFTER_TRANSACTION_UPDATE</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">TransactionUpdateEvent</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// handle transaction status update</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">);</span></span>
<span class="line"></span></code></pre></div><p>The event contains:</p><ul><li>The payment transaction record</li><li>The payment element</li><li>The payment status Mollie is sending is (string, <a href="https://docs.mollie.com/payments/status-changes" target="_blank" rel="noreferrer">possible statuses</a>)</li></ul><p>More information on this webhook and what it contains can be found <a href="https://docs.mollie.com/guides/webhooks" target="_blank" rel="noreferrer">here</a></p>`,12),o=[p];function t(c,r,y,F,D,i){return a(),n("div",null,o)}const d=s(l,[["render",t]]);export{A as __pageData,d as default};
